!function(t,e){if("function"==typeof define&&define.amd)define(["d3"],e);else if("object"==typeof module&&module.exports){var n=require("d3");module.exports=e(n)}else t.d3.tip=e(t.d3)}(this,function(t){return function(){function e(t){c=r(t),p=c.createSVGPoint(),document.body.appendChild(a)}function n(){var e=t.select(document.createElement("div"));return e.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),e.node()}function r(t){return"svg"===(t=t.node()).tagName.toLowerCase()?t:t.ownerSVGElement}function o(){return null===a&&(a=n(),document.body.appendChild(a)),t.select(a)}function l(){for(var e=y||t.event.target;void 0===e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),o=e.getBBox(),l=o.width,i=o.height,f=o.x,u=o.y;return p.x=f,p.y=u,n.nw=p.matrixTransform(r),p.x+=l,n.ne=p.matrixTransform(r),p.y+=i,n.se=p.matrixTransform(r),p.x-=l,n.sw=p.matrixTransform(r),p.y-=i/2,n.w=p.matrixTransform(r),p.x+=l,n.e=p.matrixTransform(r),p.x-=l/2,p.y-=i/2,n.n=p.matrixTransform(r),p.y+=i,n.s=p.matrixTransform(r),n}function i(t){return"function"==typeof t?t:function(){return t}}var f=function(){return"n"},u=function(){return[0,0]},s=function(){return" "},a=n(),c=null,p=null,y=null;e.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(y=t.pop());var n,r=s.apply(this,t),l=u.apply(this,t),i=f.apply(this,t),a=o(),c=m.length,p=document.documentElement.scrollTop||document.body.scrollTop,h=document.documentElement.scrollLeft||document.body.scrollLeft;for(a.html(r).style("opacity",1).style("pointer-events","all");c--;)a.classed(m[c],!1);return n=d.get(i).apply(this),a.classed(i,!0).style("top",n.top+l[0]+p+"px").style("left",n.left+l[1]+h+"px"),e},e.hide=function(){return o().style("opacity",0).style("pointer-events","none"),e},e.attr=function(n,r){if(arguments.length<2&&"string"==typeof n)return o().attr(n);var l=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(o(),l),e},e.style=function(n,r){if(arguments.length<2&&"string"==typeof n)return o().style(n);var l=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(o(),l),e},e.direction=function(t){return arguments.length?(f=null==t?t:i(t),e):f},e.offset=function(t){return arguments.length?(u=null==t?t:i(t),e):u},e.html=function(t){return arguments.length?(s=null==t?t:i(t),e):s},e.destroy=function(){return a&&(o().remove(),a=null),e};var d=t.map({n:function(){var t=l();return{top:t.n.y-a.offsetHeight,left:t.n.x-a.offsetWidth/2}},s:function(){var t=l();return{top:t.s.y,left:t.s.x-a.offsetWidth/2}},e:function(){var t=l();return{top:t.e.y-a.offsetHeight/2,left:t.e.x}},w:function(){var t=l();return{top:t.w.y-a.offsetHeight/2,left:t.w.x-a.offsetWidth}},nw:function(){var t=l();return{top:t.nw.y-a.offsetHeight,left:t.nw.x-a.offsetWidth}},ne:function(){var t=l();return{top:t.ne.y-a.offsetHeight,left:t.ne.x}},sw:function(){var t=l();return{top:t.sw.y,left:t.sw.x-a.offsetWidth}},se:function(){var t=l();return{top:t.se.y,left:t.e.x}}}),m=d.keys();return e}});